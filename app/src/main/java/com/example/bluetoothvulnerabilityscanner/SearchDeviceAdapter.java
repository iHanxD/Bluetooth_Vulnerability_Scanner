package com.example.bluetoothvulnerabilityscanner;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import androidx.recyclerview.widget.LinearLayoutManager;
import android.widget.TextView;
import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;
import java.util.ArrayList;

public class SearchDeviceAdapter extends RecyclerView.Adapter<SearchDeviceAdapter.MyViewHolder>{

    Context context;
    ArrayList<SearchDeviceData> list;
    ItemAdapter itemAdapter;
    private ItemAdapter.OnItemListener onItemListener;

    public SearchDeviceAdapter(Context context, ArrayList<SearchDeviceData> list){
        this.context = context;
        this.list = list;
        this.onItemListener = onItemListener;
    }




    @NonNull
    @Override
    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {

        View v = LayoutInflater.from(context).inflate(R.layout.device_item,parent, false);

        return new SearchDeviceAdapter.MyViewHolder(v);

    }

    @Override
    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {

        SearchDeviceData searchDeviceData =  list.get(position);

        holder.brandModelName.setText(searchDeviceData.getBrandModel());
        holder.androidVersion.setText("Android OS: " + searchDeviceData.getAndroidversion());
        holder.chipset.setText("Chipset: " + searchDeviceData.getChipset());
        holder.dateOfScan.setText("Scan Date: " + searchDeviceData.getDate());


        String vulnerabilityStatus = searchDeviceData.getVulnerabilities();

        if (vulnerabilityStatus == null){
            vulnerabilityStatus = "Not Vulnerable";
        }


        holder.vulnerabilityStatus.setText("Vulnerability Count: " + vulnerabilityStatus);

    }

    @Override
    public int getItemCount() {
        return list.size();
    }

    class MyViewHolder extends RecyclerView.ViewHolder{

        TextView brandModelName, androidVersion, chipset, dateOfScan, vulnerabilityStatus;
        ItemAdapter.OnItemListener onItemListener;

        public MyViewHolder(@NonNull View itemView){
            super(itemView);
            brandModelName = itemView.findViewById(R.id.brandModelName);
            androidVersion = itemView.findViewById(R.id.androidVersion);
            chipset = itemView.findViewById(R.id.chipset);
            dateOfScan = itemView.findViewById(R.id.dateOfScan);
            vulnerabilityStatus = itemView.findViewById(R.id.vulnerabilityStatus);

//            this.onItemListener = onItemListener;
//            itemView.setOnClickListener(this);
//        }
//
//        @Override
//        public void onClick(View view) {
//            onItemListener.onItemClick(getAdapterPosition());
//        }
    }

//    public interface OnItemListener{
//        void onItemClick(int position);
    }


}



